<main class="project-details-container">
    <!-- Bouton Commentaire -->


    <section class="project-summary-section">
        <div class="project-owner-card">
            <h3 class="card-title">Porteur d'id√©e</h3>
            <div class="owner-info">
                <div class="profile-image-container">
                    <img src="Group 671.png" alt="">
                </div>
                <span class="owner-name">{{ project?.owner?.name || 'Fatoumata Diawara' }}</span>
                <span class="projects-participated">A particip√© √† {{ project?.owner?.projectsCount || 20 }}
                    projets</span>
                <span class="user-since">Utilisateur depuis {{ project?.owner?.memberSince || '2024' }}</span>
            </div>
        </div>
        <div class="project-description-card">
            <div class="project-status-header">
                <h2 class="project-name">{{ project?.name || 'ALP' }}</h2>
                <div class="status-badge" [ngClass]="{'on-going': project?.status === 'En cours'}">
                    {{ project?.status || 'En cours' }}
                </div>
            </div>
            <span class="project-level">{{ project?.level || 'INTERMEDIAIRE' }}</span>
            <p class="project-description">
                {{ project?.description || 'Une app application web innovante con√ßue pour optimiser le suivi...' }}
            </p>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" [style.width.%]="project?.progress || 50"></div>
                <span class="progress-percentage">{{ project?.progress || 50 }}%</span>
            </div>
            <div style="display: flex;justify-content: space-between;align-items: center;">
                <button class="join-button">Rejoindre</button>
                <button class="comment-btn" (click)="toggleCommentModal()">
                    <img src="fa6-regular_message.png" alt="commentaire">
                </button>
            </div>
        </div>
    </section>

    <section class="project-timeline-section">
        <h3 class="section-title">
            <img src="fa7-solid_code-pull-request.png" alt="Timeline"> Timeline du projet
        </h3>
        <div class="timeline-content">
            <div class="timeline-steps">
                <div class="timeline-step">
                    <div class="step-icon blue-icon">
                        <img src="Group 687.png" alt="Cr√©ation">
                    </div>
                    <div class="step-details">
                        <h4 class="step-title">Cr√©ation du projet</h4>
                        <p class="step-description">Initialisation et d√©finition des objectifs</p>
                        <span class="step-date">Cr√©√© le {{ project?.creationDate || '6 Ao√ªt 2025' }}</span>
                    </div>
                </div>
                <div class="timeline-step">
                    <div class="step-icon purple-icon">
                        <img src="Group 686.png" alt="Etat">
                    </div>
                    <div class="step-details">
                        <h4 class="step-title">√âtat du projet</h4>
                        <p class="step-description">Phase de d√©veloppement du projet</p>
                        <span class="step-status">{{ project?.currentPhase || 'En cours' }}</span>
                    </div>
                </div>
            </div>

            <div class="project-technologies">
                <div class="tech-item"
                    *ngFor="let tech of project?.technologies || ['Angular', 'Typescript', 'Spring boot']">
                    <div class="tech-icon"><i class='bx bx-code-alt'></i></div>
                    <span>{{ tech }}</span>
                </div>
            </div>

            <div class="team-members">
                <div class="member-item"
                    *ngFor="let member of project?.members?.slice(0, 3) || defaultMembers.slice(0, 3)">
                    <div class="member-avatar">{{ getInitials(member.name) }}</div>
                    <span class="member-name">{{ member.name }}</span>
                </div>
                <button class="view-all-members" (click)="toggleMemberModal()">Voir tous les membres</button>
            </div>
        </div>
    </section>

    <!-- Modale Commentaires -->
    <div class="modal-overlay" *ngIf="showCommentModal" (click)="toggleCommentModal()">
        <div class="modal" (click)="$event.stopPropagation()">
            <span class="close-btn" (click)="toggleCommentModal()">&times;</span>
            <h2>Commentaires</h2>

            <div class="modal-content">
                <div class="comment-input-area">
                    <textarea [(ngModel)]="newComment" placeholder="Ajouter un commentaire..."></textarea>
                    <button class="submit-comment-btn" (click)="addComment()">Envoyer</button>
                </div>

                <div class="comment-list">
                    <div class="comment-item" *ngFor="let comment of comments">
                        <div class="comment-author">
                            <div class="initials-circle">{{ getInitials(comment.author) }}</div>
                            <span>{{ comment.author }}</span>
                        </div>
                        <div class="comment-text">
                            {{ comment.text }}
                        </div>
                        <div class="comment-date">{{ comment.date }}</div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modale Membres -->
    <div class="modal-overlay" *ngIf="showMemberModal" (click)="toggleMemberModal()">
        <div class="modal" (click)="$event.stopPropagation()">
            <span class="close-btn" (click)="toggleMemberModal()">&times;</span>
            <h2>Membres du Projet</h2>

            <div class="modal-content">
                <div class="member-item" *ngFor="let member of project?.members || defaultMembers">
                    <div class="initials-circle">{{ getInitials(member.name) }}</div>
                    <div class="member-name">{{ member.name }}</div>
                    <div class="badge">üèÖ</div>
                </div>
            </div>
        </div>
    </div>
</main>