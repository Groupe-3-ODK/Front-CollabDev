<!-- Modifier la section des stat-cards pour correspondre aux status de l'API -->
<section class="stat-cards">
  <div
    class="stat-card"
    (click)="setFilter('TODO')"
    [class.active]="currentFilter === 'TODO'"
  >
    <div class="stat-content">
      <h2>Projets à faire</h2>
      <p class="stat-number">{{ todoCount }}</p>
    </div>
    <div class="stat-icon-wrapper todo-icon">
      <img
        src="icomoon-free_clockProjets à faire.png"
        alt="Projets à faire icon"
        class="stat-icon-img"
      />
    </div>
  </div>
  <div
    class="stat-card"
    (click)="setFilter('IN_PROGRESS')"
    [class.active]="currentFilter === 'IN_PROGRESS'"
  >
    <div class="stat-content">
      <h2>Projets en cours</h2>
      <p class="stat-number">{{ inProgressCount }}</p>
    </div>
    <div class="stat-icon-wrapper inprogress-icon">
      <img
        src="bi_folderProjets en cours.png"
        alt="Projets en cours icon"
        class="stat-icon-img"
      />
    </div>
  </div>
  <div
    class="stat-card"
    (click)="setFilter('DONE')"
    [class.active]="currentFilter === 'DONE'"
  >
    <div class="stat-content">
      <h2>Projets terminés</h2>
      <p class="stat-number">{{ completedCount }}</p>
    </div>
    <div class="stat-icon-wrapper completed-icon">
      <img
        src="VectorProjets terminés.png"
        alt="Projets terminés icon"
        class="stat-icon-img"
      />
    </div>
  </div>
</section>

<!-- Modifier la boucle des projets -->
<section class="project-cards">
  <div class="project-card" *ngFor="let project of filteredProjects">
    <div class="project-header">
      <h3>{{ project.title }}</h3>
      <span
        class="status"
        [ngClass]="{
          'in-progress': project.status === 'IN_PROGRESS',
          completed: project.status === 'DONE',
          todo: project.status === 'TODO'
        }"
      >
        {{
          project.status === "IN_PROGRESS"
            ? "En cours"
            : project.status === "DONE"
            ? "Terminé"
            : "A faire"
        }}
      </span>
    </div>
    <p class="project-description">
      {{ project.description }}
    </p>
    <div class="project-tech-stack">
      <span class="tech-tag">{{ project.domain }}</span>
    </div>
    <div class="project-footer">
      <div class="collaborators-progress">
        <div class="progress-bar-container">
          <div class="progress-bar" [style.width.%]="project.progress || 0"></div>
        </div>
        <span>{{ project.progress || 0 }}%</span>
        
      </div>
    </div>
  </div>

  <div class="no-projects" *ngIf="filteredProjects.length === 0">
    <p>Aucun projet trouvé pour cette catégorie.</p>
  </div>
</section>